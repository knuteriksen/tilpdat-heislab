\hypertarget{stateMachine_8c}{}\section{source/state\+Machine.c File Reference}
\label{stateMachine_8c}\index{source/state\+Machine.\+c@{source/state\+Machine.\+c}}
{\ttfamily \#include $<$stdio.\+h$>$}\\*
{\ttfamily \#include \char`\"{}state\+Machine.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}elev.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}queue.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}timer.\+h\char`\"{}}\\*
Include dependency graph for state\+Machine.\+c\+:
% FIG 0
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
int \hyperlink{stateMachine_8c_ae8ba2b13f8593e4c24a8f8278b784f88}{state\+\_\+get\+\_\+current\+\_\+floor} (void)
\begin{DoxyCompactList}\small\item\em Returns {\ttfamily current\+\_\+floor}. \end{DoxyCompactList}\item 
void \hyperlink{stateMachine_8c_aac1184c02d041c2375e5d2829fc6e6e2}{state\+\_\+update\+\_\+current\+\_\+floor} (void)
\begin{DoxyCompactList}\small\item\em Updates current floor if floor sensor is triggered. Updates {\ttfamily beetween\+\_\+floors} depending on {\ttfamily current\+\_\+direction}. \end{DoxyCompactList}\item 
void \hyperlink{stateMachine_8c_a5e1c04e1bffdfacfecc570831b6b0fb0}{state\+\_\+init} (void)
\begin{DoxyCompactList}\small\item\em Initialize elevator\+: Move eleavtor to well defined state. Reset queue matrix. Update current floor and set floor indicator. Switch state to {\ttfamily I\+D\+LE}. \end{DoxyCompactList}\item 
void \hyperlink{stateMachine_8c_a682da146d6ebb7b42152495873617b52}{state\+\_\+open\+\_\+door} (void)
\begin{DoxyCompactList}\small\item\em Opens door, sets all orders at {\ttfamily current\+\_\+floor} to 0 and stops elevator if necessary. Switches state to {\ttfamily D\+O\+O\+R\+\_\+\+O\+P\+EN}. \end{DoxyCompactList}\item 
void \hyperlink{stateMachine_8c_a412723cc329a9d64dfa24243f603dc72}{state\+\_\+close\+\_\+door} (void)
\begin{DoxyCompactList}\small\item\em Closes door and switches state to {\ttfamily I\+D\+LE}. \end{DoxyCompactList}\item 
void \hyperlink{stateMachine_8c_a381d8559ad6aa847336b38827d04e090}{state\+\_\+emergency\+\_\+stop\+\_\+button\+\_\+pushed} (void)
\begin{DoxyCompactList}\small\item\em Stops elevator, set all orders in matrix to 0, close door and turn on emergency stop button lamp. Switches state to {\ttfamily E\+M\+E\+R\+G\+E\+N\+C\+Y\+\_\+\+S\+T\+OP}. \end{DoxyCompactList}\item 
void \hyperlink{stateMachine_8c_a75883ea8b7955430652bdd3707f3e120}{state\+\_\+emergency\+\_\+stop\+\_\+button\+\_\+released} (void)
\begin{DoxyCompactList}\small\item\em Turns off emergency stop button lamp and switches state to {\ttfamily I\+D\+LE}. \end{DoxyCompactList}\item 
void \hyperlink{stateMachine_8c_add72e0dfb50212434ea4edf5895542e9}{state\+\_\+execute\+\_\+new\+\_\+order} (void)
\begin{DoxyCompactList}\small\item\em Calculates {\ttfamily current\+\_\+direction} and set motor direction to {\ttfamily current\+\_\+direction}. Switches state to {\ttfamily M\+O\+V\+I\+NG} if elevator should move, or {\ttfamily D\+O\+O\+R\+\_\+\+O\+P\+EN} if elevator should open door. \end{DoxyCompactList}\item 
int \hyperlink{stateMachine_8c_a0ba62ba30b97b2cd2f40477dcabb863a}{state\+\_\+get\+\_\+current\+\_\+direction} (void)
\begin{DoxyCompactList}\small\item\em Returns {\ttfamily current\+\_\+direction}. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
int {\bfseries current\+\_\+floor}\hypertarget{stateMachine_8c_a53f0cf8d6c7426344a7336af4b06925a}{}\label{stateMachine_8c_a53f0cf8d6c7426344a7336af4b06925a}

\item 
int {\bfseries current\+\_\+direction}\hypertarget{stateMachine_8c_a4d7deb15e280e9370b8f1b0f14635ac9}{}\label{stateMachine_8c_a4d7deb15e280e9370b8f1b0f14635ac9}

\item 
int {\bfseries between\+\_\+floors}\hypertarget{stateMachine_8c_a0d38da447588f7234ad833be0b003306}{}\label{stateMachine_8c_a0d38da447588f7234ad833be0b003306}

\end{DoxyCompactItemize}


\subsection{Function Documentation}
\index{state\+Machine.\+c@{state\+Machine.\+c}!state\+\_\+close\+\_\+door@{state\+\_\+close\+\_\+door}}
\index{state\+\_\+close\+\_\+door@{state\+\_\+close\+\_\+door}!state\+Machine.\+c@{state\+Machine.\+c}}
\subsubsection[{\texorpdfstring{state\+\_\+close\+\_\+door(void)}{state_close_door(void)}}]{\setlength{\rightskip}{0pt plus 5cm}void state\+\_\+close\+\_\+door (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}\hypertarget{stateMachine_8c_a412723cc329a9d64dfa24243f603dc72}{}\label{stateMachine_8c_a412723cc329a9d64dfa24243f603dc72}


Closes door and switches state to {\ttfamily I\+D\+LE}. 


\begin{DoxyParams}{Parameters}
{\em void.} & \\
\hline
\end{DoxyParams}


Definition at line 66 of file state\+Machine.\+c.

\index{state\+Machine.\+c@{state\+Machine.\+c}!state\+\_\+emergency\+\_\+stop\+\_\+button\+\_\+pushed@{state\+\_\+emergency\+\_\+stop\+\_\+button\+\_\+pushed}}
\index{state\+\_\+emergency\+\_\+stop\+\_\+button\+\_\+pushed@{state\+\_\+emergency\+\_\+stop\+\_\+button\+\_\+pushed}!state\+Machine.\+c@{state\+Machine.\+c}}
\subsubsection[{\texorpdfstring{state\+\_\+emergency\+\_\+stop\+\_\+button\+\_\+pushed(void)}{state_emergency_stop_button_pushed(void)}}]{\setlength{\rightskip}{0pt plus 5cm}void state\+\_\+emergency\+\_\+stop\+\_\+button\+\_\+pushed (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}\hypertarget{stateMachine_8c_a381d8559ad6aa847336b38827d04e090}{}\label{stateMachine_8c_a381d8559ad6aa847336b38827d04e090}


Stops elevator, set all orders in matrix to 0, close door and turn on emergency stop button lamp. Switches state to {\ttfamily E\+M\+E\+R\+G\+E\+N\+C\+Y\+\_\+\+S\+T\+OP}. 


\begin{DoxyParams}{Parameters}
{\em void.} & \\
\hline
\end{DoxyParams}


Definition at line 72 of file state\+Machine.\+c.

\index{state\+Machine.\+c@{state\+Machine.\+c}!state\+\_\+emergency\+\_\+stop\+\_\+button\+\_\+released@{state\+\_\+emergency\+\_\+stop\+\_\+button\+\_\+released}}
\index{state\+\_\+emergency\+\_\+stop\+\_\+button\+\_\+released@{state\+\_\+emergency\+\_\+stop\+\_\+button\+\_\+released}!state\+Machine.\+c@{state\+Machine.\+c}}
\subsubsection[{\texorpdfstring{state\+\_\+emergency\+\_\+stop\+\_\+button\+\_\+released(void)}{state_emergency_stop_button_released(void)}}]{\setlength{\rightskip}{0pt plus 5cm}void state\+\_\+emergency\+\_\+stop\+\_\+button\+\_\+released (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}\hypertarget{stateMachine_8c_a75883ea8b7955430652bdd3707f3e120}{}\label{stateMachine_8c_a75883ea8b7955430652bdd3707f3e120}


Turns off emergency stop button lamp and switches state to {\ttfamily I\+D\+LE}. 


\begin{DoxyParams}{Parameters}
{\em void.} & \\
\hline
\end{DoxyParams}


Definition at line 84 of file state\+Machine.\+c.

\index{state\+Machine.\+c@{state\+Machine.\+c}!state\+\_\+execute\+\_\+new\+\_\+order@{state\+\_\+execute\+\_\+new\+\_\+order}}
\index{state\+\_\+execute\+\_\+new\+\_\+order@{state\+\_\+execute\+\_\+new\+\_\+order}!state\+Machine.\+c@{state\+Machine.\+c}}
\subsubsection[{\texorpdfstring{state\+\_\+execute\+\_\+new\+\_\+order(void)}{state_execute_new_order(void)}}]{\setlength{\rightskip}{0pt plus 5cm}void state\+\_\+execute\+\_\+new\+\_\+order (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}\hypertarget{stateMachine_8c_add72e0dfb50212434ea4edf5895542e9}{}\label{stateMachine_8c_add72e0dfb50212434ea4edf5895542e9}


Calculates {\ttfamily current\+\_\+direction} and set motor direction to {\ttfamily current\+\_\+direction}. Switches state to {\ttfamily M\+O\+V\+I\+NG} if elevator should move, or {\ttfamily D\+O\+O\+R\+\_\+\+O\+P\+EN} if elevator should open door. 


\begin{DoxyParams}{Parameters}
{\em void.} & \\
\hline
\end{DoxyParams}


Definition at line 94 of file state\+Machine.\+c.

\index{state\+Machine.\+c@{state\+Machine.\+c}!state\+\_\+get\+\_\+current\+\_\+direction@{state\+\_\+get\+\_\+current\+\_\+direction}}
\index{state\+\_\+get\+\_\+current\+\_\+direction@{state\+\_\+get\+\_\+current\+\_\+direction}!state\+Machine.\+c@{state\+Machine.\+c}}
\subsubsection[{\texorpdfstring{state\+\_\+get\+\_\+current\+\_\+direction(void)}{state_get_current_direction(void)}}]{\setlength{\rightskip}{0pt plus 5cm}int state\+\_\+get\+\_\+current\+\_\+direction (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}\hypertarget{stateMachine_8c_a0ba62ba30b97b2cd2f40477dcabb863a}{}\label{stateMachine_8c_a0ba62ba30b97b2cd2f40477dcabb863a}


Returns {\ttfamily current\+\_\+direction}. 


\begin{DoxyParams}{Parameters}
{\em void.} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
{\ttfamily current\+\_\+direction} 
\end{DoxyReturn}


Definition at line 109 of file state\+Machine.\+c.

\index{state\+Machine.\+c@{state\+Machine.\+c}!state\+\_\+get\+\_\+current\+\_\+floor@{state\+\_\+get\+\_\+current\+\_\+floor}}
\index{state\+\_\+get\+\_\+current\+\_\+floor@{state\+\_\+get\+\_\+current\+\_\+floor}!state\+Machine.\+c@{state\+Machine.\+c}}
\subsubsection[{\texorpdfstring{state\+\_\+get\+\_\+current\+\_\+floor(void)}{state_get_current_floor(void)}}]{\setlength{\rightskip}{0pt plus 5cm}int state\+\_\+get\+\_\+current\+\_\+floor (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}\hypertarget{stateMachine_8c_ae8ba2b13f8593e4c24a8f8278b784f88}{}\label{stateMachine_8c_ae8ba2b13f8593e4c24a8f8278b784f88}


Returns {\ttfamily current\+\_\+floor}. 


\begin{DoxyParams}{Parameters}
{\em void.} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
{\ttfamily current\+\_\+floor} 
\end{DoxyReturn}


Definition at line 22 of file state\+Machine.\+c.

\index{state\+Machine.\+c@{state\+Machine.\+c}!state\+\_\+init@{state\+\_\+init}}
\index{state\+\_\+init@{state\+\_\+init}!state\+Machine.\+c@{state\+Machine.\+c}}
\subsubsection[{\texorpdfstring{state\+\_\+init(void)}{state_init(void)}}]{\setlength{\rightskip}{0pt plus 5cm}void state\+\_\+init (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}\hypertarget{stateMachine_8c_a5e1c04e1bffdfacfecc570831b6b0fb0}{}\label{stateMachine_8c_a5e1c04e1bffdfacfecc570831b6b0fb0}


Initialize elevator\+: Move eleavtor to well defined state. Reset queue matrix. Update current floor and set floor indicator. Switch state to {\ttfamily I\+D\+LE}. 


\begin{DoxyParams}{Parameters}
{\em void.} & \\
\hline
\end{DoxyParams}


Definition at line 44 of file state\+Machine.\+c.

\index{state\+Machine.\+c@{state\+Machine.\+c}!state\+\_\+open\+\_\+door@{state\+\_\+open\+\_\+door}}
\index{state\+\_\+open\+\_\+door@{state\+\_\+open\+\_\+door}!state\+Machine.\+c@{state\+Machine.\+c}}
\subsubsection[{\texorpdfstring{state\+\_\+open\+\_\+door(void)}{state_open_door(void)}}]{\setlength{\rightskip}{0pt plus 5cm}void state\+\_\+open\+\_\+door (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}\hypertarget{stateMachine_8c_a682da146d6ebb7b42152495873617b52}{}\label{stateMachine_8c_a682da146d6ebb7b42152495873617b52}


Opens door, sets all orders at {\ttfamily current\+\_\+floor} to 0 and stops elevator if necessary. Switches state to {\ttfamily D\+O\+O\+R\+\_\+\+O\+P\+EN}. 


\begin{DoxyParams}{Parameters}
{\em void.} & \\
\hline
\end{DoxyParams}


Definition at line 57 of file state\+Machine.\+c.

\index{state\+Machine.\+c@{state\+Machine.\+c}!state\+\_\+update\+\_\+current\+\_\+floor@{state\+\_\+update\+\_\+current\+\_\+floor}}
\index{state\+\_\+update\+\_\+current\+\_\+floor@{state\+\_\+update\+\_\+current\+\_\+floor}!state\+Machine.\+c@{state\+Machine.\+c}}
\subsubsection[{\texorpdfstring{state\+\_\+update\+\_\+current\+\_\+floor(void)}{state_update_current_floor(void)}}]{\setlength{\rightskip}{0pt plus 5cm}void state\+\_\+update\+\_\+current\+\_\+floor (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}\hypertarget{stateMachine_8c_aac1184c02d041c2375e5d2829fc6e6e2}{}\label{stateMachine_8c_aac1184c02d041c2375e5d2829fc6e6e2}


Updates current floor if floor sensor is triggered. Updates {\ttfamily beetween\+\_\+floors} depending on {\ttfamily current\+\_\+direction}. 


\begin{DoxyParams}{Parameters}
{\em void.} & \\
\hline
\end{DoxyParams}


Definition at line 27 of file state\+Machine.\+c.

